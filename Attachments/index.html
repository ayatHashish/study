<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Attachment</title>

        <link rel="stylesheet" href="../css/style.css">
    </head>
    <body>
        <div class="attachment-container" style="direction: rtl;">
            <label>ุงููููุงุช ุงููุฑููุฉ</label>

            <div class="upload-container">
                <div class="upload-box" id="dropArea"
                    onclick="document.getElementById('fileInput').click()">
                    <img class="ms-2" src="/images/cloud-computing.svg"
                        alt="Alternate Text" />
                    ุงุณุญุจ ูุงููุช ุงููููุงุช ููุง ุฃู ุงุถุบุท ูุงุฎุชูุงุฑ ููู
                    <input type="file" id="fileInput" multiple hidden>
                </div>

                <!-- ุงูุชุจุฏูู: ุฑูุน ุงูููู ุงููุงุฏู ููุณุชูุฏ ุงูุชุนุงูุฏ ุฃู ูููู ุนุงุฏู -->
                <label class="checkbox-label"
                    style="margin-top:8px; display:flex; align-items:center; gap:.5rem;">
                    <input type="checkbox" id="mainContractCheck" />
                    ุชุญููู ูุณุชูุฏ ุงูุชุนุงูุฏ (ููู ูุงุญุฏ ููุท)
                </label>

                <!-- ุฃูุณุงู ุงูุนุฑุถ -->
                <div class="uploaded-sections" style="margin-top:12px;">
                    <!-- ูุณู ูุณุชูุฏ ุงูุชุนุงูุฏ -->
                    <label id="contractLabel"
                        style="display:none; font-weight:600;">ูุณุชูุฏ
                        ุงูุชุนุงูุฏ</label>
                    <div id="contractFile"></div>

                    <!-- ูุณู ุจุงูู ุงููููุงุช -->
                    <label id="othersLabel"
                        style="display:none; font-weight:600; margin-top:10px;">ุจุงูู
                        ุงููููุงุช ุงููุญููุฉ</label>
                    <div class="uploaded-files" id="fileList"></div>
                </div>
            </div>
        </div>
        <!-- ====== ุงูููุฏูู ====== -->
        <div id="previewModal"
            style="display:none; position: fixed; top:0; left:0; width:100%; height:100%; 
background: rgba(0,0,0,0.6); z-index:9999; justify-content:center; align-items:center;">

            <div
                style="background:#fff; width:85%; height:85%; display:flex; border-radius:10px; overflow:hidden; position:relative;">

                <!-- ุงูุฌุฒุก ุงูุฃูู: ุนุฑุถ PDF/ุตูุฑ -->
                <div
                    style="flex:1; border-left:1px solid #ddd; display:flex; flex-direction:column; align-items:center; justify-content:center;">
                    <canvas id="pdfCanvas"
                        style="width:100%; height:90%; border:1px solid #ccc; display:none;"></canvas>
                    <img id="imgPreview"
                        style="max-width:100%; max-height:90%; display:none; object-fit:contain;" />
                    <div style="margin-top:5px; display:flex; gap:10px;">
                        <button onclick="prevPage()">โฌ๏ธ ุงูุตูุญุฉ ุงูุณุงุจูุฉ</button>
                        <button onclick="nextPage()">โก๏ธ ุงูุตูุญุฉ ุงูุชุงููุฉ</button>
                        <button onclick="zoomIn()">โ ุชูุจูุฑ</button>
                        <button onclick="zoomOut()">โ ุชุตุบูุฑ</button>
                        <button id="rotateImageBtn" onclick="rotateImage()"
                            style="display:none;">๐ ุชุฏููุฑ ุงูุตูุฑุฉ</button>
                        <button id="rotatePdfBtn" onclick="rotatePDF()"
                            style="display:none;">๐ ุชุฏููุฑ PDF</button>
                    </div>
                </div>

                <!-- ุงูุฌุฒุก ุงูุชุงูู: ุงูุจูุงูุงุช -->
                <div
                    style="flex:1; padding:20px; display:flex; flex-direction:column; gap:15px; justify-content:center;">
                    <select>
                        <option>ุงุฎุชูุงุฑ 1</option>
                        <option>ุงุฎุชูุงุฑ 2</option>
                        <option>ุงุฎุชูุงุฑ 3</option>
                    </select>
                    <select>
                        <option>ุงุฎุชูุงุฑ 1</option>
                        <option>ุงุฎุชูุงุฑ 2</option>
                        <option>ุงุฎุชูุงุฑ 3</option>
                    </select>
                    <select>
                        <option>ุงุฎุชูุงุฑ 1</option>
                        <option>ุงุฎุชูุงุฑ 2</option>
                        <option>ุงุฎุชูุงุฑ 3</option>
                    </select>
                    <input type="date" />
                    <div style="display:flex; gap:10px;">
                        <button
                            style="background:green; color:#fff; padding:10px; border:none; border-radius:5px;">ุฅุฏุฎุงู
                            ุจูุงูุงุช</button>
                        <button
                            style="background:red; color:#fff; padding:10px; border:none; border-radius:5px;"
                            onclick="closeModal()">ุฅูุบุงุก</button>
                    </div>
                </div>
            </div>

            <!-- ุฃุฒุฑุงุฑ ุงูุชููู -->
            <button id="prevFileBtn" onclick="prevFile()"
                style="position:absolute; left:10px; top:50%; transform:translateY(-50%);">โ</button>

            <button id="nextFileBtn" onclick="nextFile()"
                style="position:absolute; right:10px; top:50%; transform:translateY(-50%);">โถ</button>
        </div>
        <!-- <script
            src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.16.105/pdf.min.js"></script> -->

        <!-- <script src="./js/pdf.min.js">  </script> -->
     <script type="module">
  import * as pdfjsLib from "./js/pdf.mjs";

  // ุฑุจุท ุงูู worker
  pdfjsLib.GlobalWorkerOptions.workerSrc = "./js/pdf.worker.mjs";

  // ุชุญููู ููู PDF
  const url = "./files/test.pdf";
  const loadingTask = pdfjsLib.getDocument(url);
  loadingTask.promise.then(pdf => {
    console.log("ุนุฏุฏ ุงูุตูุญุงุช:", pdf.numPages);
  });
</script>
        <script src="./js/pdf.worker.mjs"></script>
        <script src="./js/pdf.sandbox.mjs "></script>
        <script src="./js/js.js"> </script>

    </body>
</html>